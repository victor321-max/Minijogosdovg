<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Jogo da Velha - Modos</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
    background: #f0f0f0;
  }
  h1 {
    margin-bottom: 10px;
  }
  #mode-select {
    margin-bottom: 20px;
  }
  table {
    margin: 0 auto;
    border-collapse: collapse;
  }
  td {
    width: 80px;
    height: 80px;
    border: 2px solid #333;
    font-size: 48px;
    cursor: pointer;
    text-align: center;
    vertical-align: middle;
    user-select: none;
  }
  td.disabled {
    cursor: not-allowed;
    color: #999;
  }
  #status {
    margin-top: 20px;
    font-size: 20px;
    font-weight: bold;
  }
  button {
    margin-top: 15px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>Jogo da Velha</h1>

<div id="mode-select">
  <label><input type="radio" name="mode" value="2players" checked> 2 Jogadores</label>
  <label><input type="radio" name="mode" value="easy"> IA F√°cil</label>
  <label><input type="radio" name="mode" value="medium"> IA M√©dio</label>
  <label><input type="radio" name="mode" value="hard"> IA Dif√≠cil</label>
</div>

<table id="board">
  <tr><td data-index="0"></td><td data-index="1"></td><td data-index="2"></td></tr>
  <tr><td data-index="3"></td><td data-index="4"></td><td data-index="5"></td></tr>
  <tr><td data-index="6"></td><td data-index="7"></td><td data-index="8"></td></tr>
</table>

<div id="status">Vez do jogador X</div>
<button id="restart">Reiniciar</button>

<script>
const boardCells = document.querySelectorAll("#board td");
const status = document.getElementById("status");
const restartBtn = document.getElementById("restart");
const modeRadios = document.querySelectorAll('input[name="mode"]');

let board = ["", "", "", "", "", "", "", "", ""];
let currentPlayer = "X";
let gameActive = true;
let mode = "2players";

// Combina√ß√µes vencedoras
const winningCombos = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function checkWin(player) {
  return winningCombos.some(combo => 
    combo.every(i => board[i] === player)
  );
}

function checkDraw() {
  return board.every(cell => cell !== "");
}

function updateStatus(text) {
  status.textContent = text;
}

function makeMove(index, player) {
  if(board[index] === "" && gameActive) {
    board[index] = player;
    boardCells[index].textContent = player;
    boardCells[index].classList.add("disabled");
    if(checkWin(player)) {
      updateStatus(`Jogador ${player} venceu! üéâ`);
      gameActive = false;
    } else if(checkDraw()) {
      updateStatus("Empate!");
      gameActive = false;
    } else {
      currentPlayer = currentPlayer === "X" ? "O" : "X";
      updateStatus(`Vez do jogador ${currentPlayer}`);
      if(mode !== "2players" && currentPlayer === "O" && gameActive) {
        setTimeout(aiMove, 500);
      }
    }
  }
}

function aiMove() {
  if(!gameActive) return;
  let moveIndex;
  switch(mode) {
    case "easy":
      moveIndex = aiEasy();
      break;
    case "medium":
      moveIndex = aiMedium();
      break;
    case "hard":
      moveIndex = aiHard();
      break;
  }
  makeMove(moveIndex, "O");
}

// IA F√°cil: escolhe uma posi√ß√£o aleat√≥ria vazia
function aiEasy() {
  const emptyIndices = board.map((v,i) => v === "" ? i : null).filter(i => i !== null);
  const randomIndex = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
  return randomIndex;
}

// IA M√©dio: tenta ganhar ou bloquear, sen√£o escolhe aleat√≥rio
function aiMedium() {
  // Tenta ganhar
  for(let i = 0; i < board.length; i++) {
    if(board[i] === "") {
      board[i] = "O";
      if(checkWin("O")) {
        board[i] = "";
        return i;
      }
      board[i] = "";
    }
  }
  // Tenta bloquear o X
  for(let i = 0; i < board.length; i++) {
    if(board[i] === "") {
      board[i] = "X";
      if(checkWin("X")) {
        board[i] = "";
        return i;
      }
      board[i] = "";
    }
  }
  // Aleat√≥rio
  return aiEasy();
}

// IA Dif√≠cil: usa Minimax para a melhor jogada
function aiHard() {
  let bestScore = -Infinity;
  let bestMove;
  for(let i = 0; i < board.length; i++) {
    if(board[i] === "") {
      board[i] = "O";
      let score = minimax(board, 0, false);
      board[i] = "";
      if(score > bestScore) {
        bestScore = score;
        bestMove = i;
      }
    }
  }
  return bestMove;
}

function minimax(boardState, depth, isMaximizing) {
  if(checkWin("O")) return 10 - depth;
  if(checkWin("X")) return depth - 10;
  if(checkDraw()) return 0;

  if(isMaximizing) {
    let bestScore = -Infinity;
    for(let i = 0; i < boardState.length; i++) {
      if(boardState[i] === "") {
        boardState[i] = "O";
        let score = minimax(boardState, depth + 1, false);
        boardState[i] = "";
        bestScore = Math.max(score, bestScore);
      }
    }
    return bestScore;
  } else {
    let bestScore = Infinity;
    for(let i = 0; i < boardState.length; i++) {
      if(boardState[i] === "") {
        boardState[i] = "X";
        let score = minimax(boardState, depth + 1, true);
        boardState[i] = "";
        bestScore = Math.min(score, bestScore);
      }
    }
    return bestScore;
  }
}

// Atualiza o modo quando o usu√°rio muda a op√ß√£o
modeRadios.forEach(radio => {
  radio.addEventListener("change", () => {
    mode = radio.value;
    restartGame();
  });
});

function restartGame() {
  board = ["", "", "", "", "", "", "", "", ""];
  currentPlayer = "X";
  gameActive = true;
  updateStatus(`Vez do jogador ${currentPlayer}`);
  boardCells.forEach(cell => {
    cell.textContent = "";
    cell.classList.remove("disabled");
  });
}

// Evento dos cliques nas c√©lulas
boardCells.forEach(cell => {
  cell.addEventListener("click", () => {
    if(gameActive && currentPlayer === "X") {
      const idx = parseInt(cell.getAttribute("data-index"));
      makeMove(idx, "X");
    }
  });
});

// Evento do bot√£o reiniciar
restartBtn.addEventListener("click", restartGame);

</script>

</body>
  </html>
